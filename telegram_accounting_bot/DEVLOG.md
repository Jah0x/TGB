# Dev Log

Это файл для заметок о разработке бота и ведения логов.

## Логи приложения
Бот пишет события через модуль `logging`. Уровень логирования задаётся в `main.py`,
по умолчанию это `INFO`. Логи выводятся в стандартный поток и могут
перенаправляться в файл при запуске приложения.

## Как просматривать
При запуске через `python -m telegram_accounting_bot.main` вывод логов
появляется в консоли. Чтобы сохранить их в файл, можно использовать
перенаправление:

```bash
python -m telegram_accounting_bot.main > bot.log 2>&1
```

Файл `bot.log` затем можно анализировать для поиска ошибок или статистики.

## Полезные команды
- `tail -f bot.log` — позволяет следить за логами в реальном времени.
- `grep ERROR bot.log` — быстро найти сообщения об ошибках.

## Прочее
Все файлы проекта (код, модули и документация) перенесены в каталог
`telegram_accounting_bot/`. На верхнем уровне лежат только файлы конфигурации
и документации. При разработке полезно хранить логи запуска в отдельной папке
`logs/` и периодически очищать её, либо настроить `RotatingFileHandler` из
модуля `logging`.

## 2024-05-26
- Добавлена фильтрация сообщений по ID темы и чата в `accounting.py`.
- В `config.py` появились константы `ACCOUNTING_CHAT_ID` и `ACCOUNTING_TOPIC_ID` c
  дефолтными значениями для темы "БУХГАЛТЕРИЯ".

## 2024-05-27
- Улучшено логирование в `accounting.py`: добавлены сообщения DEBUG
  о полученных данных и успешном разборе сообщений.
- В `config.py` введена переменная `SEND_EACH_SALE` для режима тестирования.
- Новый модуль `utils/notifier.py` отправляет администратору сообщение о каждой
  продаже, если включён `SEND_EACH_SALE`.

